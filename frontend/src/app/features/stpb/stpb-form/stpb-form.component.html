<app-page-header 
  [title]="isEditMode ? 'Edit STPB' : 'Tambah STPB'" 
  [subtitle]="isEditMode ? 'Update data STPB' : 'Buat STPB baru'">
</app-page-header>

<div class="form-container">
  <form nz-form [formGroup]="stpbForm" (ngSubmit)="onSubmit()" [nzLayout]="'vertical'">
    <nz-form-item>
      <nz-form-label nzRequired>Nomor STPB</nz-form-label>
      <nz-form-control nzErrorTip="Nomor STPB harus diisi!">
        <input nz-input formControlName="nomorSTPB" placeholder="Contoh: STPB/2026/001" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzRequired>Tanggal</nz-form-label>
      <nz-form-control nzErrorTip="Tanggal harus diisi!">
        <nz-date-picker formControlName="tanggal" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label>Deskripsi</nz-form-label>
      <nz-form-control>
        <textarea 
          nz-input 
          formControlName="deskripsi" 
          placeholder="Deskripsi STPB" 
          [nzAutosize]="{ minRows: 3, maxRows: 6 }">
        </textarea>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzRequired>Nilai Total</nz-form-label>
      <nz-form-control nzErrorTip="Nilai total harus lebih dari 0!">
        <nz-input-number 
          formControlName="nilaiTotal" 
          [nzMin]="0" 
          [nzStep]="1000"
          [nzFormatter]="formatterIDR"
          [nzParser]="parserIDR"
          style="width: 100%;"
          nzPlaceHolder="Masukkan nilai total">
        </nz-input-number>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzRequired>Status</nz-form-label>
      <nz-form-control nzErrorTip="Status harus dipilih!">
        <nz-select formControlName="status" nzPlaceHolder="Pilih status">
          <nz-option *ngFor="let option of statusOptions" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <button nz-button nzType="primary" [nzLoading]="isLoading" [disabled]="!stpbForm.valid">
          {{ isEditMode ? 'Update' : 'Simpan' }}
        </button>
        <button nz-button type="button" (click)="cancel()" style="margin-left: 8px;">
          Batal
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</div>
